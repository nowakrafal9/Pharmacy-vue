"use strict";(self["webpackChunkpharmacy_inv"]=self["webpackChunkpharmacy_inv"]||[]).push([[764],{8764:function(e,t,s){s.r(t),s.d(t,{default:function(){return he}});var i=s(3396),n=s(9242),a=s(2268);const l={class:"m-3"},r={class:"input-group w-50"},u={class:"splitContent mt-3"},d={class:"d-flex flex-column"},h={key:0,class:"w-100"},o={class:"table table-striped table-dark w-100"},c=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{scope:"col"},"Email"),(0,i._)("th",{scope:"col"},"Name"),(0,i._)("th",{scope:"col"},"Surname"),(0,i._)("th",{scope:"col"},"Details")])],-1),m={key:0},b=["onClick"],w=(0,i._)("i",{class:"bi bi-search"},null,-1),k=[w],_={key:1},p=(0,i._)("tr",null,[(0,i._)("td",{colspan:"4"},"No data found")],-1),g=[p],y={key:1,class:"d-flex justify-content-center"},D=(0,i._)("div",{class:"spinner-border",style:{width:"5rem",height:"5rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1),v=[D],f={key:0,class:"d-flex align-baseline justify-content-center"},x={class:"ms-3 w-100"},S={class:"table table-striped table-dark"},I=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{colspan:"3",scope:"col"},"User details")])],-1),N=(0,i._)("td",{class:"w-25"},"User email:",-1),U={class:"w-50"},E=(0,i._)("td",{class:"w-25"},null,-1),B=(0,i._)("td",null,"Name:",-1),C={key:0},V={key:1},F=(0,i._)("i",{class:"bi bi-pencil-square"},null,-1),z=[F],q=(0,i._)("i",{class:"bi bi-x-lg"},null,-1),A=[q],R=(0,i._)("i",{class:"bi bi-check-lg"},null,-1),Z=[R],j=(0,i._)("td",null,"Surname:",-1),H={key:0},Y={key:1},K=(0,i._)("i",{class:"bi bi-pencil-square"},null,-1),L=[K],W=(0,i._)("i",{class:"bi bi-x-lg"},null,-1),G=[W],J=(0,i._)("i",{class:"bi bi-check-lg"},null,-1),M=[J],O=(0,i._)("td",null,"Role:",-1),P=(0,i._)("td",null,null,-1),Q=(0,i._)("td",null,"Status:",-1),T={key:0},X={key:1},$={key:2},ee={key:0,class:"bi bi-unlock"},te={key:1,class:"bi bi-lock"},se={key:3};function ie(e,t,s,w,p,D){const F=(0,i.up)("Navbar");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(F),(0,i._)("div",l,[(0,i._)("div",r,[(0,i.wy)((0,i._)("input",{type:"search",class:"form-control rounded",placeholder:"User email","aria-label":"Search","aria-describedby":"search-addon","onUpdate:modelValue":t[0]||(t[0]=e=>this.userEmail=e)},null,512),[[n.nr,this.userEmail]]),(0,i._)("button",{type:"button",class:"btn btn-outline-warning rounded ms-1",onClick:t[1]||(t[1]=(...e)=>D.filterData&&D.filterData(...e))}," search "),(0,i._)("button",{type:"button",class:"btn btn-outline-warning rounded ms-1",onClick:t[2]||(t[2]=(...e)=>D.clearFilter&&D.clearFilter(...e))}," clear ")]),(0,i._)("div",u,[(0,i._)("div",d,[this.dataDownloaded?((0,i.wg)(),(0,i.iD)("div",h,[(0,i._)("table",o,[c,this.users.length>0?((0,i.wg)(),(0,i.iD)("tbody",m,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(this.users,((e,t)=>((0,i.wg)(),(0,i.iD)("tr",{key:e.id},[(0,i._)("td",null,(0,a.zw)(e.email),1),(0,i._)("td",null,(0,a.zw)(e.name),1),(0,i._)("td",null,(0,a.zw)(e.surname),1),(0,i._)("td",null,[(0,i._)("button",{class:"btn btn-outline-warning",onClick:e=>D.showDetail(t)},k,8,b)])])))),128))])):((0,i.wg)(),(0,i.iD)("tbody",_,g))])])):((0,i.wg)(),(0,i.iD)("div",y,v))]),this.show?((0,i.wg)(),(0,i.iD)("div",f,[(0,i._)("div",x,[(0,i._)("table",S,[I,(0,i._)("tbody",null,[(0,i._)("tr",null,[N,(0,i._)("td",U,(0,a.zw)(this.users[this.currentIndex].email),1),E]),(0,i._)("tr",null,[B,this.editName?((0,i.wg)(),(0,i.iD)("td",V,[(0,i.wy)((0,i._)("input",{type:"text",class:"rounded","onUpdate:modelValue":t[3]||(t[3]=e=>this.editedValue=e)},null,512),[[n.nr,this.editedValue]])])):((0,i.wg)(),(0,i.iD)("td",C,(0,a.zw)(this.users[this.currentIndex].name),1)),(0,i._)("td",null,[this.editName?((0,i.wg)(),(0,i.iD)("button",{key:1,class:"btn btn-outline-warning",onClick:t[5]||(t[5]=e=>D.editField("name"))},A)):((0,i.wg)(),(0,i.iD)("button",{key:0,class:"btn btn-outline-warning",onClick:t[4]||(t[4]=e=>D.editField("name"))},z)),this.editName?((0,i.wg)(),(0,i.iD)("button",{key:2,class:"btn btn-outline-warning ms-3",onClick:t[6]||(t[6]=e=>D.saveChanges())},Z)):(0,i.kq)("",!0)])]),(0,i._)("tr",null,[j,this.editSurname?((0,i.wg)(),(0,i.iD)("td",Y,[(0,i.wy)((0,i._)("input",{type:"text",class:"rounded","onUpdate:modelValue":t[7]||(t[7]=e=>this.editedValue=e)},null,512),[[n.nr,this.editedValue]])])):((0,i.wg)(),(0,i.iD)("td",H,(0,a.zw)(this.users[this.currentIndex].surname),1)),(0,i._)("td",null,[this.editSurname?((0,i.wg)(),(0,i.iD)("button",{key:1,class:"btn btn-outline-warning",onClick:t[9]||(t[9]=e=>D.editField("surname"))},G)):((0,i.wg)(),(0,i.iD)("button",{key:0,class:"btn btn-outline-warning",onClick:t[8]||(t[8]=e=>D.editField("surname"))},L)),this.editSurname?((0,i.wg)(),(0,i.iD)("button",{key:2,class:"btn btn-outline-warning ms-3",onClick:t[10]||(t[10]=e=>D.saveChanges())},M)):(0,i.kq)("",!0)])]),(0,i._)("tr",null,[O,(0,i._)("td",null,(0,a.zw)(this.users[this.currentIndex].role),1),P]),(0,i._)("tr",null,[Q,1==this.users[this.currentIndex].statusBlocked?((0,i.wg)(),(0,i.iD)("td",T," Blocked ")):((0,i.wg)(),(0,i.iD)("td",X,"Unblocked")),"Admin"!=this.users[this.currentIndex].role?((0,i.wg)(),(0,i.iD)("td",$,[(0,i._)("button",{class:"btn btn-outline-warning",onClick:t[11]||(t[11]=e=>D.changeBlockStatus())},[1==this.users[this.currentIndex].statusBlocked?((0,i.wg)(),(0,i.iD)("i",ee)):((0,i.wg)(),(0,i.iD)("i",te))])])):((0,i.wg)(),(0,i.iD)("td",se))])])])])])):(0,i.kq)("",!0)])])],64)}var ne=s(7333),ae=s(4239),le=s(1130),re={components:{Navbar:le.Z},data(){return{users:[],show:!1,currentIndex:null,dataDownloaded:!1,userEmail:"",userName:"",userSurname:"",previousUserEmail:"",previousUserName:"",previousUserSurname:"",editName:!1,editSurname:!1,editRole:!1,editStatus:!1}},setup(){return{store:ae.Z}},created(){this.getAllData()},methods:{clearFilter:function(){""==this.previousUserEmail&&""==this.previousUserName&&""==this.previousUserSurname||(this.dataDownloaded=!1,this.editName=!1,this.editSurname=!1,this.editRole=!1,this.editStatus=!1,this.show=!1),this.dataDownloaded||this.getAllData(),this.userEmail="",this.userName="",this.userSurname="",this.previousUserEmail="",this.previousUserName="",this.previousUserSurname=""},filterData:function(){if(this.previousUserEmail==this.userEmail&&this.previousUserName==this.userName&&this.previousUserSurname==this.userSurname||(this.previousUserEmail=this.userEmail,this.previousUserName=this.userName,this.previousUserSurname=this.userSurname,this.dataDownloaded=!1,this.editName=!1,this.editSurname=!1,this.editRole=!1,this.editStatus=!1,this.show=!1),!this.dataDownloaded){this.users=[];let e=ne.db.collection("users");""!=this.userEmail&&(e=e.where("email",">=",this.userEmail),e=e.where("email","<=",this.userEmail+"uf8ff")),e.orderBy("email","asc").get().then((e=>{e.forEach((e=>{let t=e.id,s=e.data();this.users.push({id:t,email:s.email,name:s.name,surname:s.surname,role:s.role,statusBlocked:s.statusBlocked})})),this.dataDownloaded=!0}))}},getAllData:function(){this.users=[];let e=ne.db.collection("users");e.where("role","!=","Admin").orderBy("role","asc").orderBy("email","asc").get().then((e=>{e.forEach((e=>{let t=e.id,s=e.data();this.users.push({id:t,email:s.email,name:s.name,surname:s.surname,role:s.role,statusBlocked:s.statusBlocked})})),this.dataDownloaded=!0}))},showDetail:function(e){if(this.show=!0,this.currentIndex==e)return this.show=!1,void(this.currentIndex=null);this.currentIndex==e&&null!=this.currentIndex||(this.currentIndex=e)},editField:function(e){if("name"==e){if(this.editName)return void(this.editName=!1);this.clearEdit(),this.editName=!0,this.editedValue=this.users[this.currentIndex].name}if("surname"==e){if(this.editSurname)return void(this.editSurname=!1);this.clearEdit(),this.editSurname=!0,this.editedValue=this.users[this.currentIndex].surname}if("status"==e){if(this.editStatus)return void(this.editStatus=!1);this.clearEdit(),this.editStatus=!0,this.editedValue=this.users[this.currentIndex].statusBlocked}},clearEdit:function(){this.editName=!1,this.editSurname=!1,this.editStatus=!1},changeBlockStatus:function(){this.users[this.currentIndex].statusBlocked=!this.users[this.currentIndex].statusBlocked,ne.db.collection("users").doc(this.users[this.currentIndex].id).update("statusBlocked",this.users[this.currentIndex].statusBlocked)},saveChanges:function(){this.editName?(this.editName=!1,this.editedValue!=this.users[this.currentIndex].name&&(this.users[this.currentIndex].name=this.editedValue,ne.db.collection("users").doc(this.users[this.currentIndex].id).update("name",this.users[this.currentIndex].name))):this.editSurname&&(this.editSurname=!1,this.editedValue!=this.users[this.currentIndex].surname&&(this.users[this.currentIndex].surname=this.editedValue,ne.db.collection("users").doc(this.users[this.currentIndex].id).update("surname",this.users[this.currentIndex].surname)))}}},ue=s(89);const de=(0,ue.Z)(re,[["render",ie]]);var he=de}}]);
//# sourceMappingURL=764.b80913ca.js.map
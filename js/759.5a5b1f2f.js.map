{"version":3,"file":"js/759.5a5b1f2f.js","mappings":"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","sources":["webpack://pharmacy-inv/./src/views/UserCreateView.vue","webpack://pharmacy-inv/./src/data/PermittedChars.js","webpack://pharmacy-inv/./src/views/UserCreateView.vue?6ce7"],"sourcesContent":["<template>\r\n  <Navbar />\r\n\r\n  <div\r\n    class=\"\r\n      mt-3\r\n      d-flex\r\n      flex-column\r\n      align-items-center\r\n      justify-content-center\r\n      gap-3\r\n    \"\r\n  >\r\n    <div\r\n      class=\"\r\n        d-flex\r\n        flex-column\r\n        align-items-center\r\n        justify-content-center\r\n        gap-3\r\n        p-4\r\n        shadow\r\n        rounded\r\n      \"\r\n      style=\"background: hsl(210, 29%, 35%)\"\r\n      v-if=\"!this.creatingUser\"\r\n    >\r\n      <h2 class=\"m-0\">Register employee</h2>\r\n      <div class=\"form-floating\" style=\"color: gray\">\r\n        <input\r\n          type=\"email\"\r\n          class=\"form-control\"\r\n          id=\"emailInput\"\r\n          placeholder=\"name@example.com\"\r\n          v-model=\"this.email\"\r\n        />\r\n        <label for=\"emailInput\">Email address</label>\r\n      </div>\r\n      <div class=\"form-floating\" style=\"color: gray\">\r\n        <input\r\n          type=\"password\"\r\n          class=\"form-control\"\r\n          id=\"passInput\"\r\n          placeholder=\"name@example.com\"\r\n          v-model=\"this.password\"\r\n        />\r\n        <label for=\"passInput\">Password</label>\r\n      </div>\r\n      <div class=\"form-floating\" style=\"color: gray\">\r\n        <input\r\n          type=\"text\"\r\n          class=\"form-control\"\r\n          id=\"nameInput\"\r\n          placeholder=\"name@example.com\"\r\n          v-model=\"this.name\"\r\n          @keypress=\"isLetter($event)\"\r\n        />\r\n        <label for=\"nameInput\">Name</label>\r\n      </div>\r\n      <div class=\"form-floating\" style=\"color: gray\">\r\n        <input\r\n          type=\"text\"\r\n          class=\"form-control\"\r\n          id=\"surnameInput\"\r\n          placeholder=\"name@example.com\"\r\n          v-model=\"this.surname\"\r\n          @keypress=\"isLetter($event)\"\r\n        />\r\n        <label for=\"surnameInput\">Surname</label>\r\n      </div>\r\n      <button class=\"btn btn-outline-warning\" @click=\"createUser()\">\r\n        Create user\r\n      </button>\r\n    </div>\r\n    <div class=\"d-flex justify-content-center mt-5\" v-else>\r\n      <div\r\n        class=\"spinner-border\"\r\n        style=\"width: 5rem; height: 5rem\"\r\n        role=\"status\"\r\n      >\r\n        <span class=\"visually-hidden\">Loading...</span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { db, auth } from \"../main.js\";\r\nimport store from \"../store/index.js\";\r\nimport Navbar from \"../components/NavbarComponent.vue\";\r\nimport { useRouter } from \"vue-router\";\r\nimport { permittedChars } from \"../data/PermittedChars.js\";\r\n\r\nexport default {\r\n  components: { Navbar },\r\n  data() {\r\n    return {\r\n      email: \"\",\r\n      password: \"\",\r\n      name: \"\",\r\n      surname: \"\",\r\n      uid: \"\",\r\n\r\n      creatingUser: false,\r\n    };\r\n  },\r\n  setup() {\r\n    const router = useRouter();\r\n\r\n    return {\r\n      store,\r\n      router,\r\n    };\r\n  },\r\n  methods: {\r\n    createUser: async function () {\r\n      if (\r\n        this.email != \"\" &&\r\n        this.email.indexOf(\"@\") != -1 &&\r\n        this.password != \"\" &&\r\n        this.password.length >= 6 &&\r\n        this.name != \"\" &&\r\n        this.surname != \"\"\r\n      ) {\r\n        this.name = this.transformWord(this.name);\r\n        this.surname = this.transformWord(this.surname);\r\n\r\n        this.creatingUser = true;\r\n        await auth\r\n          .createUserWithEmailAndPassword(this.email, this.password)\r\n          .then((cred) => {\r\n            this.createDocForUser(cred.user.uid);\r\n          })\r\n          .catch((err) => {\r\n            this.creatingUser = false;\r\n            alert(err);\r\n          });\r\n      } else {\r\n        alert(this.createAlert());\r\n      }\r\n    },\r\n    createDocForUser: async function (uid) {\r\n      await db\r\n        .collection(\"users\")\r\n        .doc(uid)\r\n        .set({\r\n          email: this.email,\r\n          name: this.name,\r\n          surname: this.surname,\r\n          role: \"User\",\r\n          statusBlocked: false,\r\n        })\r\n        .then(() => {\r\n          this.email = \"\";\r\n          this.password = \"\";\r\n          this.name = \"\";\r\n          this.surname = \"\";\r\n          this.router.push(\"/userBrowser\");\r\n        });\r\n    },\r\n    transformWord: function (string) {\r\n      string = string.toLowerCase();\r\n\r\n      return string.charAt(0).toUpperCase() + string.slice(1);\r\n    },\r\n    isLetter: function (evt) {\r\n      evt = evt ? evt : window.event;\r\n      let charCode = evt.which ? evt.which : evt.keyCode;\r\n      if (\r\n        charCode == 32 ||\r\n        (charCode >= 65 && charCode < 122) ||\r\n        permittedChars.indexOf(String.fromCharCode(charCode)) != -1\r\n      ) {\r\n        return true;\r\n      } else {\r\n        evt.preventDefault();\r\n      }\r\n    },\r\n    createAlert: function () {\r\n      let alert = \"\";\r\n      if (this.email == \"\") {\r\n        alert += \"Email cannot be empty \\n\";\r\n      } else if (this.email.indexOf(\"@\") == -1) {\r\n        alert += \"Wrong format of email: example@example.com \\n\";\r\n      }\r\n      if (this.password == \"\") {\r\n        alert += \"Password cannot be empty \\n\";\r\n      } else if (this.password.length < 6) {\r\n        alert += \"Password has to have at least 6 characters \\n\";\r\n      }\r\n      if (this.name == \"\") {\r\n        alert += \"Name cannot be empty \\n\";\r\n      }\r\n      if (this.surname == \"\") {\r\n        alert += \"Surname cannot be empty \\n\";\r\n      }\r\n\r\n      return alert;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\na {\r\n  text-decoration: none;\r\n}\r\n</style>","let permittedChars = \"ĄąĆćĘęŁłŃńÓóŚśŹźŻż\"\r\n\r\nexport {\r\n    permittedChars\r\n}","import { render } from \"./UserCreateView.vue?vue&type=template&id=09abac6b\"\nimport script from \"./UserCreateView.vue?vue&type=script&lang=js\"\nexport * from \"./UserCreateView.vue?vue&type=script&lang=js\"\n\nimport \"./UserCreateView.vue?vue&type=style&index=0&id=09abac6b&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\nowak\\\\Desktop\\\\PWAG\\\\Projekt\\\\pharmacy-inv\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","style","_createElementVNode","for","role","_hoisted_13","_createVNode","_component_Navbar","creatingUser","_createElementBlock","_hoisted_14","_hoisted_3","type","id","placeholder","email","$event","_hoisted_5","password","_hoisted_7","name","onKeypress","$options","_hoisted_9","surname","_hoisted_11","onClick","permittedChars","components","Navbar","data","uid","setup","router","useRouter","store","methods","createUser","async","this","indexOf","length","transformWord","auth","then","cred","createDocForUser","user","catch","err","alert","createAlert","db","doc","set","statusBlocked","push","string","toLowerCase","charAt","toUpperCase","slice","isLetter","evt","window","event","charCode","which","keyCode","String","fromCharCode","preventDefault","__exports__","render"],"sourceRoot":""}